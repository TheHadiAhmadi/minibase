import{S as j,i as A,s as T,k as S,l as V,m as R,h as $,n as q,b as h,A as y,o as L,R as F,$ as E,v as p,w as _,x as g,f as l,t as m,y as b,a2 as G,a as P,c as D,a3 as H,q as k,r as C,u as M,g as N,d as U}from"../../../../../chunks/index-5e43de0b.js";import{_ as I}from"../../../../../chunks/preload-helper-aa6bc0ce.js";import{P as z,I as B}from"../../../../../chunks/compiler-1d3b934d.js";import{a as J,B as O}from"../../../../../chunks/api-3bbbb124.js";import{B as K}from"../../../../../chunks/ButtonGroup-eeb94945.js";import{C as Q}from"../../../../../chunks/Card-d158b6a8.js";import{C as W}from"../../../../../chunks/CardActions-89341884.js";import{C as X,a as Y}from"../../../../../chunks/CardTitle-e56f6901.js";import{i as Z,g as x}from"../../../../../chunks/navigation-a1edae7f.js";function ee(i){let t;return{c(){t=S("div"),this.h()},l(n){t=V(n,"DIV",{class:!0}),R(t).forEach($),this.h()},h(){q(t,"class","editor w-full language-javascript")},m(n,e){h(n,t,e),i[3](t)},p:y,i:y,o:y,d(n){n&&$(t),i[3](null)}}}function te(i,t,n){let e,o,{code:r}=t;function s(a){e==null||e.updateCode(a)}L(()=>{I(()=>import("../../../../../chunks/codejar-f2b93de5.js"),[],import.meta.url).then(({CodeJar:a})=>{I(()=>import("../../../../../chunks/linenumbers-74b14ce0.js"),[],import.meta.url).then(({withLineNumbers:c})=>{e=a(o,c(z.highlightElement),{window,tab:"	"}),e.updateCode(r),e.onUpdate(u=>{n(1,r=u)})})})}),F(()=>{e==null||e.destroy()});function f(a){E[a?"unshift":"push"](()=>{o=a,n(0,o)})}return i.$$set=a=>{"code"in a&&n(1,r=a.code)},[o,r,s,f]}class ne extends j{constructor(t){super(),A(this,t,te,ee,T,{code:1,updateCode:2})}get updateCode(){return this.$$.ctx[2]}}function re(i){let t,n=i[0].function.name+"",e,o;return{c(){t=k('Edit "'),e=k(n),o=k('" (TODO: Playground)')},l(r){t=C(r,'Edit "'),e=C(r,n),o=C(r,'" (TODO: Playground)')},m(r,s){h(r,t,s),h(r,e,s),h(r,o,s)},p(r,s){s&1&&n!==(n=r[0].function.name+"")&&M(e,n)},d(r){r&&$(t),r&&$(e),r&&$(o)}}}function oe(i){let t;return{c(){t=k("Back")},l(n){t=C(n,"Back")},m(n,e){h(n,t,e)},d(n){n&&$(t)}}}function ae(i){let t,n;return t=new B({props:{pack:"material-symbols",name:"save-outline"}}),{c(){p(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,o){g(t,e,o),n=!0},i(e){n||(l(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function se(i){let t,n;return t=new B({props:{pack:"material-symbols",name:"save-outline"}}),{c(){p(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,o){g(t,e,o),n=!0},i(e){n||(l(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function ie(i){let t,n;return t=new B({props:{pack:"material-symbols",name:"check"}}),{c(){p(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,o){g(t,e,o),n=!0},i(e){n||(l(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function ce(i){let t,n,e,o;const r=[ie,se,ae],s=[];function f(a,c){return a[2]==="clean"?0:a[2]==="dirty"?1:a[2]==="saving"?2:-1}return~(t=f(i))&&(n=s[t]=r[t](i)),{c(){n&&n.c(),e=k(`
          Save`)},l(a){n&&n.l(a),e=C(a,`
          Save`)},m(a,c){~t&&s[t].m(a,c),h(a,e,c),o=!0},p(a,c){let u=t;t=f(a),t!==u&&(n&&(N(),m(s[u],1,1,()=>{s[u]=null}),U()),~t?(n=s[t],n||(n=s[t]=r[t](a),n.c()),l(n,1),n.m(e.parentNode,e)):n=null)},i(a){o||(l(n),o=!0)},o(a){m(n),o=!1},d(a){~t&&s[t].d(a),a&&$(e)}}}function fe(i){let t,n,e,o;return t=new O({props:{$$slots:{default:[oe]},$$scope:{ctx:i}}}),t.$on("click",i[5]),e=new O({props:{loading:i[2]==="saving",disabled:i[2]!=="dirty",color:"primary",$$slots:{default:[ce]},$$scope:{ctx:i}}}),e.$on("click",i[4]),{c(){p(t.$$.fragment),n=P(),p(e.$$.fragment)},l(r){_(t.$$.fragment,r),n=D(r),_(e.$$.fragment,r)},m(r,s){g(t,r,s),h(r,n,s),g(e,r,s),o=!0},p(r,s){const f={};s&1024&&(f.$$scope={dirty:s,ctx:r}),t.$set(f);const a={};s&4&&(a.loading=r[2]==="saving"),s&4&&(a.disabled=r[2]!=="dirty"),s&1028&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(l(t.$$.fragment,r),l(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){b(t,r),r&&$(n),b(e,r)}}}function ue(i){let t,n;return t=new K({props:{$$slots:{default:[fe]},$$scope:{ctx:i}}}),{c(){p(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,o){g(t,e,o),n=!0},p(e,o){const r={};o&1029&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(l(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function le(i){let t,n,e,o;return t=new Y({props:{$$slots:{default:[re]},$$scope:{ctx:i}}}),e=new W({props:{$$slots:{default:[ue]},$$scope:{ctx:i}}}),{c(){p(t.$$.fragment),n=P(),p(e.$$.fragment)},l(r){_(t.$$.fragment,r),n=D(r),_(e.$$.fragment,r)},m(r,s){g(t,r,s),h(r,n,s),g(e,r,s),o=!0},p(r,s){const f={};s&1025&&(f.$$scope={dirty:s,ctx:r}),t.$set(f);const a={};s&1029&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){o||(l(t.$$.fragment,r),l(e.$$.fragment,r),o=!0)},o(r){m(t.$$.fragment,r),m(e.$$.fragment,r),o=!1},d(r){b(t,r),r&&$(n),b(e,r)}}}function me(i){let t,n,e,o,r,s;t=new X({props:{$$slots:{default:[le]},$$scope:{ctx:i}}});function f(c){i[7](c)}let a={};return i[1]!==void 0&&(a.code=i[1]),o=new ne({props:a}),i[6](o),E.push(()=>G(o,"code",f)),{c(){p(t.$$.fragment),n=P(),e=S("div"),p(o.$$.fragment),this.h()},l(c){_(t.$$.fragment,c),n=D(c),e=V(c,"DIV",{class:!0});var u=R(e);_(o.$$.fragment,u),u.forEach($),this.h()},h(){q(e,"class","overflow-y-auto max-h-screen")},m(c,u){g(t,c,u),h(c,n,u),h(c,e,u),g(o,e,null),s=!0},p(c,u){const w={};u&1029&&(w.$$scope={dirty:u,ctx:c}),t.$set(w);const v={};!r&&u&2&&(r=!0,v.code=c[1],H(()=>r=!1)),o.$set(v)},i(c){s||(l(t.$$.fragment,c),l(o.$$.fragment,c),s=!0)},o(c){m(t.$$.fragment,c),m(o.$$.fragment,c),s=!1},d(c){b(t,c),c&&$(n),c&&$(e),i[6](null),b(o)}}}function $e(i){let t,n;return t=new Q({props:{$$slots:{default:[me]},$$scope:{ctx:i}}}),{c(){p(t.$$.fragment)},l(e){_(t.$$.fragment,e)},m(e,o){g(t,e,o),n=!0},p(e,[o]){const r={};o&1039&&(r.$$scope={dirty:o,ctx:e}),t.$set(r)},i(e){n||(l(t.$$.fragment,e),n=!0)},o(e){m(t.$$.fragment,e),n=!1},d(e){b(t,e)}}}function de(i,t,n){let{data:e}=t,o="clean",r=e.function.code;async function s(){try{if(o!=="dirty")return;n(0,e.function.code=a,e),n(0,e.function.project=e.project.name,e),n(2,o="saving");const d=await J.editFunction(e.project.name,e.function.id,e.function);n(2,o="clean"),n(0,e.function=d,e),Z()}catch{}}let f,a=e.function.code;function c(d){console.log("update"),f==null||f.updateCode(e.function.code),n(1,a=e.function.code)}const u=()=>x("/"+e.project.name);function w(d){E[d?"unshift":"push"](()=>{f=d,n(3,f)})}function v(d){a=d,n(1,a)}return i.$$set=d=>{"data"in d&&n(0,e=d.data)},i.$$.update=()=>{i.$$.dirty&2&&(r!==a?n(2,o="dirty"):n(2,o="clean")),i.$$.dirty&1&&c(e.function.name)},[e,a,o,f,s,u,w,v]}class ye extends j{constructor(t){super(),A(this,t,de,$e,T,{data:0})}}export{ye as default};
